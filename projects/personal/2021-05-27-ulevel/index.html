<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>µLevel; PCB Strain Gauge | Magnus Borresen</title> <meta name="author" content="Magnus Borresen"/> <meta name="description" content="Personal website for Magnus Borresen "/> <meta name="keywords" content="academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/favicon.ico"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://magnusborresen.com/projects/personal/2021-05-27-ulevel/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="https://magnusborresen.com/"><span class="font-weight-bold">Magnus</span> Borresen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">µLevel; PCB Strain Gauge</h1> <p class="post-description"></p> </header> <article> <p>The µLevel is one of my pet projects that I started after needing a bed levelling feature on my 3D printer. I had built a <a href="https://www.thingiverse.com/thing:1752766" target="_blank" rel="noopener noreferrer">Hypercube 3D printer</a> that I never really got working properly. So I ended up selling it and bought a Creality Ender 3 instead. This means that the project has been put on hold since it was designed pretty specifically to the Hypercube. However I might pick it up again. Never the less you can read more about it below.</p> <p>The basic idea was to use the cheap PCB manufacturing options in China such as JLC, to create a strain gauge. This would then sit on top of the 3D printer nozzle. When the nozzle touched the print bed during levelling, it would then alter the resistance in the strain gauge, causing the following circuitry to trigger. The advantage of this over, say a standard touch probe would be that everyting was moved away from the nozzle. Really it was part of a bigger plan I had to try doing some real 3D printing.</p> <p>All standard FDM printers today are actually only printing in 2.5D. Think about it. The printer is doing one layer at a time and does not change its Z-axis while printing any one layer (other than accomodating for differences in platform heights). So to do some real 3D printing, we need to have the nozzle moving in the Z-direction actively while printing. <a href="https://www.youtube.com/watch?v=gmePlcU0TRw" target="_blank" rel="noopener noreferrer">Teaching Tech did a Youtube</a> video about it which peaked my interest.</p> <p>Anyway, I digress. The µLevel removed one of the things in the way of doing this type of printing. I designed a small board in KiCad that utilizes the Wheatstone Bridge. Basically it is a half bridge. The PCB is 2-layers and there are 0.127 mm traces that fills out the majority of the top and bottom layers. On the top layer there are headers and two resistors acting as the other half of the bridge. The traces on either side are each a resistor.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/uLevel-1024x500-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/uLevel-1024x500-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/uLevel-1024x500-1400.webp"></source> <img src="/assets/img/projects/uLevel-1024x500.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>The trace resistance of the top and bottom layer are each around 22 ohms. The reading is taken between the two, basically making them a voltage divider. The trace resistors are sitting on parallel to the two SMD 10k ohm resistors, creating the bridge. The schematic is shown below, very rudimentary.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/uLevel-schematics-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/uLevel-schematics-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/uLevel-schematics-1400.webp"></source> <img src="/assets/img/projects/uLevel-schematics.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>PCB design is shown below</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/uLevel-pcb-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/uLevel-pcb-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/uLevel-pcb-1400.webp"></source> <img src="/assets/img/projects/uLevel-pcb.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>There are four mounting points on the PCB which is probably two too many. I think it would be better to only have two mounting points create a smaller footprint and possible providing more mounting options. The hole in the middle of the PCB is for the filament or filament tube to go through.</p> <p>A wheatstone bridge works by a difference in voltage between the two probing points. Voltage differences between V_Sig+ and V_Sig- shows whether the PCB is strained or not. There should be no difference between the two voltages if there are no strain on the PCB if the resistors are 100% matched. In practice though, there will always be a small difference since there are tolerances in the traces and in the SMD resistors. This can be accomodated for in software and hardware.</p> <p>The voltage differences are tiny even when straining the gauge. Hence amplification is needed. I used an AD620AN instrumentation amplifier, which adds very little noise to the signal. The AD620AN has a very simple gain selection as it is resistor programmed. Whatever resistance is seen between pin 1 and pin 8 corresponds to a gain. I tried several different configurations, but found 249 ohm (199.4x gain) worked alright.</p> <p>Initial results where quite promising when testing on the bench. I could hook up a scope to the output of the amplifier circuit and press down on the PCB. I would see a decent amount of movement in the voltage. When I hooked the output up to an ADC on an Arduino, I could also see a good amount of change in the output. However I was worried that I had to press too hard on the PCB compared to having the nozzle press.</p> <p>I created a new nozzle mount for the printer and mounted the PCB on top of it. I then started moving the nozzle toward the print bed. It would trigger but it needed way to much pressure. So much that the aluminum platform mount started twisting.</p> <p>This is around the time where I sold the Hypercube and bought a new printer and the project has been on hold ever since.</p> <p>Though I do have some ideas on how to improve it. I recently noticed that PCBWay will do thinner PCB’s. The current protoype is built with a 1.6mm FR4 print from JLC. However PCBWay will do a 0.8 mm FR4 board for the same price. Of course the ticker the board, the more force it takes to bend it. Standard strain gauges are printed on something that look like a flex PCB so it takes as little force as possible to bend it.</p> <p>The project is open source and KiCad files can be <a href="https://github.com/magborresen/uLevel" target="_blank" rel="noopener noreferrer">found on my github</a>.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Magnus Borresen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-QG1FB01NT0"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-QG1FB01NT0");</script> </body> </html>